{% load static %}
<script src="{% static 'https://cdn.jsdelivr.net/npm/apexcharts' %}"></script>
<script type="text/javascript">
    // Pie Chart
    var studentCount = parseInt("{{ student_count|default:'0' }}");
    var staffCount = parseInt("{{ staff_count|default:'0' }}");
    var courseCount = parseInt("{{ course_count|default:'0' }}");
    var subjectCount = parseInt("{{ subject_count|default:'0' }}");

    var optionsPie = {
        series: [studentCount, staffCount, courseCount, subjectCount],
        chart: {
            height: 365,
            width: '100%',
            type: 'pie',
        },
        labels: ['Student', 'Staff', 'Course', 'Subject'],
        responsive: [{
            breakpoint: 480,
            options: {
                chart: {
                    width: 200
                },
                legend: {
                    position: 'bottom'
                }
            }
        }]
    };

    var chartPie = new ApexCharts(document.querySelector("#all_details"), optionsPie);
    chartPie.render();

    // Bar Chart
    var maleCount = parseInt("{{ student_male_count|default:'0' }}");
    var femaleCount = parseInt("{{ student_female_count|default:'0' }}");

    var optionsBar = {
        chart: {
            type: 'bar',
            height: 350,
            width: '100%',
            stacked: true,
            toolbar: {
                show: false
            },
        },
        dataLabels: {
            enabled: false
        },
        plotOptions: {
            bar: {
                columnWidth: '45%',
            }
        },
        series: [{
            name: "Boys",
            color: '#fdbb38',
            data: [maleCount]
        }, {
            name: "Girls",
            color: '#19affb',
            data: [femaleCount]
        }],
        labels: [2024],
        xaxis: {
            labels: {
                show: false
            },
            axisBorder: {
                show: false
            },
            axisTicks: {
                show: false
            },
        },
        yaxis: {
            axisBorder: {
                show: false
            },
            axisTicks: {
                show: false
            },
            labels: {
                style: {
                    colors: '#777'
                }
            }
        },
        title: {
            text: '',
            align: 'left',
            style: {
                fontSize: '18px'
            }
        }
    };

    var chartBar = new ApexCharts(document.querySelector('#stud_gender'), optionsBar);
    chartBar.render();

    // Donut Chart
    var options = {
        series: [studentCount, subjectCount],
        chart: {
        type: 'donut',
        height: 350,
        width: '100%',
      },
      labels: ['Student', 'Staff'],
      responsive: [{
        breakpoint: 480,
        options: {
          chart: {
            width: 200
          },
          legend: {
            position: 'bottom'
          }
        }
      }]
      };

      var chart = new ApexCharts(document.querySelector("#stud_staff"), options);
      chart.render();

    
    //Gradient Donut

    var options = {
        series: [courseCount, subjectCount],
        chart: {
        height: 350,
        width: '100%',
        type: 'donut',
      },
      plotOptions: {
        pie: {
          startAngle: -90,
          endAngle: 270
        }
      },
      dataLabels: {
        enabled: false
      },
      fill: {
        type: 'gradient',
      },
      legend: {
        formatter: function(val, opts) {
          return val + " - " + opts.w.globals.series[opts.seriesIndex]
        }
      },
      labels: ['Course', 'Subject'],
      responsive: [{
        breakpoint: 480,
        options: {
          chart: {
            width: 200
          },
          legend: {
            position: 'bottom'
          }
        }
      }]
      };

      var chart = new ApexCharts(document.querySelector("#cors_subj"), options);
      chart.render();
</script>
